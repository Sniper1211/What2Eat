# è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

éšæœºèœå•ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªç®€å•çš„å•é¡µé¢Webåº”ç”¨ï¼Œä½¿ç”¨çº¯HTMLã€CSSå’ŒJavaScriptå®ç°ã€‚åº”ç”¨é‡‡ç”¨å®¢æˆ·ç«¯å­˜å‚¨ï¼Œæ— éœ€æœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæä¾›ç›´è§‚çš„å›¾å½¢ç•Œé¢è¿›è¡Œèœå•ç®¡ç†å’Œæ¨èã€‚

## æ¶æ„

### æ•´ä½“æ¶æ„

```
menu-generator/
â”œâ”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css          # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ app.js             # ä¸»åº”ç”¨é€»è¾‘
â”‚   â”œâ”€â”€ storage.js         # æœ¬åœ°å­˜å‚¨ç®¡ç†
â”‚   â””â”€â”€ recommender.js     # æ¨èå¼•æ“
â”œâ”€â”€ data/
â”‚   â””â”€â”€ default-menu.json  # é»˜è®¤èœå•æ•°æ®
â””â”€â”€ README.md
```

### æŠ€æœ¯æ ˆ

- **HTML5**: é¡µé¢ç»“æ„å’Œè¯­ä¹‰åŒ–æ ‡è®°
- **CSS3**: æ ·å¼è®¾è®¡å’Œå“åº”å¼å¸ƒå±€
- **Vanilla JavaScript**: åº”ç”¨é€»è¾‘å’Œäº¤äº’
- **localStorage**: å®¢æˆ·ç«¯æ•°æ®æŒä¹…åŒ–
- **JSON**: æ•°æ®å­˜å‚¨æ ¼å¼

## ç»„ä»¶å’Œæ¥å£

### 1. æ•°æ®æ¨¡å‹ (app.js)

```javascript
class Dish {
    constructor(name, ingredients, difficulty, timeMinutes, tags = []) {
        this.id = Date.now().toString();
        this.name = name;
        this.ingredients = ingredients; // Array of strings
        this.difficulty = difficulty;   // 1-5çº§éš¾åº¦
        this.timeMinutes = timeMinutes;
        this.tags = tags;
        this.createdAt = new Date().toISOString();
    }
    
    matchesIngredients(required = [], excluded = []) {
        // æ£€æŸ¥æ˜¯å¦åŒ…å«å¿…éœ€é£Ÿæä¸”ä¸åŒ…å«æ’é™¤é£Ÿæ
    }
    
    toJSON() {
        return { ...this };
    }
    
    static fromJSON(data) {
        return Object.assign(new Dish(), data);
    }
}
```

### 2. å­˜å‚¨ç®¡ç† (storage.js)

```javascript
class MenuStorage {
    constructor() {
        this.storageKey = 'menu-generator-dishes';
    }
    
    loadMenu() {
        // ä»localStorageåŠ è½½èœå•æ•°æ®
    }
    
    saveMenu(dishes) {
        // ä¿å­˜èœå•æ•°æ®åˆ°localStorage
    }
    
    exportMenu() {
        // å¯¼å‡ºèœå•ä¸ºJSONæ–‡ä»¶
    }
    
    importMenu(jsonData) {
        // ä»JSONæ•°æ®å¯¼å…¥èœå•
    }
    
    clearMenu() {
        // æ¸…ç©ºæ‰€æœ‰èœå•æ•°æ®
    }
}
```

### 3. æ¨èå¼•æ“ (recommender.js)

```javascript
class MenuRecommender {
    constructor(dishes) {
        this.dishes = dishes;
    }
    
    randomRecommend() {
        // å®Œå…¨éšæœºæ¨èä¸€ä¸ªèœå“
    }
    
    recommendByIngredients(required = [], excluded = []) {
        // åŸºäºé£Ÿææ¨èèœå“
    }
    
    chooseFromOptions(dishNames) {
        // ä»æŒ‡å®šèœå“ä¸­éšæœºé€‰æ‹©
    }
    
    filterByDifficulty(maxDifficulty) {
        // æŒ‰éš¾åº¦è¿‡æ»¤èœå“
    }
    
    filterByTime(maxTime) {
        // æŒ‰ç”¨æ—¶è¿‡æ»¤èœå“
    }
}
```

### 4. ç”¨æˆ·ç•Œé¢ (index.html + app.js)

```javascript
class MenuApp {
    constructor() {
        this.storage = new MenuStorage();
        this.dishes = this.storage.loadMenu();
        this.recommender = new MenuRecommender(this.dishes);
        this.initializeUI();
    }
    
    initializeUI() {
        // åˆå§‹åŒ–ç•Œé¢äº‹ä»¶ç›‘å¬å™¨
    }
    
    addDish(dishData) {
        // æ·»åŠ æ–°èœå“
    }
    
    removeDish(dishId) {
        // åˆ é™¤èœå“
    }
    
    updateDishList() {
        // æ›´æ–°èœå“åˆ—è¡¨æ˜¾ç¤º
    }
    
    showRecommendation(dish) {
        // æ˜¾ç¤ºæ¨èç»“æœ
    }
    
    handleRecommendRequest() {
        // å¤„ç†æ¨èè¯·æ±‚
    }
}
```

## æ•°æ®æ¨¡å‹

### èœå“æ•°æ®ç»“æ„

```json
{
  "dishes": [
    {
      "id": "1704067200000",
      "name": "å®«ä¿é¸¡ä¸",
      "ingredients": ["é¸¡èƒ¸è‚‰", "èŠ±ç”Ÿç±³", "å¹²è¾£æ¤’", "èŠ±æ¤’"],
      "difficulty": 3,
      "timeMinutes": 30,
      "tags": ["å·èœ", "ä¸‹é¥­"],
      "createdAt": "2024-01-01T12:00:00.000Z"
    }
  ]
}
```

### localStorageå­˜å‚¨ç»“æ„

```javascript
// localStorage key: 'menu-generator-dishes'
{
  "dishes": [...],
  "settings": {
    "defaultDifficulty": 3,
    "maxRecommendations": 5,
    "theme": "light"
  },
  "version": "1.0",
  "lastUpdated": "2024-01-01T12:00:00.000Z"
}
```

## é”™è¯¯å¤„ç†

### é”™è¯¯ç±»å‹å®šä¹‰

```javascript
class MenuGeneratorError extends Error {
    constructor(message, type = 'GENERAL') {
        super(message);
        this.name = 'MenuGeneratorError';
        this.type = type;
    }
}

// é”™è¯¯ç±»å‹å¸¸é‡
const ERROR_TYPES = {
    DISH_NOT_FOUND: 'DISH_NOT_FOUND',
    INVALID_DATA: 'INVALID_DATA',
    STORAGE_ERROR: 'STORAGE_ERROR',
    VALIDATION_ERROR: 'VALIDATION_ERROR'
};
```

### é”™è¯¯å¤„ç†ç­–ç•¥

1. **å­˜å‚¨æ“ä½œé”™è¯¯**: ä½¿ç”¨try-catchåŒ…è£…localStorageæ“ä½œï¼Œæä¾›å‹å¥½çš„é”™è¯¯æç¤º
2. **æ•°æ®éªŒè¯é”™è¯¯**: åœ¨è¡¨å•æäº¤å‰è¿›è¡Œå®¢æˆ·ç«¯éªŒè¯ï¼Œæ˜¾ç¤ºå…·ä½“çš„é”™è¯¯ä¿¡æ¯
3. **ç”¨æˆ·è¾“å…¥é”™è¯¯**: å®æ—¶éªŒè¯ç”¨æˆ·è¾“å…¥ï¼Œæä¾›å³æ—¶åé¦ˆ
4. **æµè§ˆå™¨å…¼å®¹æ€§**: æ£€æµ‹localStorageæ”¯æŒï¼Œæä¾›é™çº§æ–¹æ¡ˆ

## æµ‹è¯•ç­–ç•¥

### æ‰‹åŠ¨æµ‹è¯•

- **åŠŸèƒ½æµ‹è¯•**: éªŒè¯æ‰€æœ‰èœå•ç®¡ç†å’Œæ¨èåŠŸèƒ½
- **ç•Œé¢æµ‹è¯•**: æµ‹è¯•ç”¨æˆ·ç•Œé¢çš„äº¤äº’å’Œå“åº”
- **æ•°æ®æŒä¹…åŒ–æµ‹è¯•**: éªŒè¯localStorageçš„ä¿å­˜å’ŒåŠ è½½
- **æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•**: åœ¨ä¸åŒæµè§ˆå™¨ä¸­æµ‹è¯•åŠŸèƒ½

### ç”¨æˆ·ä½“éªŒæµ‹è¯•

- **æ“ä½œæµç¨‹**: æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æ“ä½œæµç¨‹
- **é”™è¯¯å¤„ç†**: éªŒè¯é”™è¯¯æƒ…å†µä¸‹çš„ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡**: æµ‹è¯•åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„æ˜¾ç¤ºæ•ˆæœ

### æµ‹è¯•æ•°æ®

```javascript
const SAMPLE_DISHES = [
    {
        id: "1",
        name: "ç•ªèŒ„é¸¡è›‹",
        ingredients: ["ç•ªèŒ„", "é¸¡è›‹", "è‘±"],
        difficulty: 1,
        timeMinutes: 15,
        tags: ["å®¶å¸¸èœ", "ç®€å•"],
        createdAt: "2024-01-01T12:00:00.000Z"
    },
    {
        id: "2", 
        name: "çº¢çƒ§è‚‰",
        ingredients: ["äº”èŠ±è‚‰", "ç”ŸæŠ½", "è€æŠ½", "å†°ç³–"],
        difficulty: 4,
        timeMinutes: 90,
        tags: ["è¤èœ", "è´¹æ—¶"],
        createdAt: "2024-01-01T12:30:00.000Z"
    }
];
```

## ç”¨æˆ·ä½“éªŒè®¾è®¡

### ç•Œé¢è®¾è®¡åŸåˆ™

1. **ç®€æ´æ€§**: ç•Œé¢ç®€æ´æ˜äº†ï¼Œçªå‡ºæ ¸å¿ƒåŠŸèƒ½
2. **ç›´è§‚æ€§**: ä½¿ç”¨å›¾æ ‡å’Œé¢œè‰²æå‡å¯è¯»æ€§
3. **å“åº”å¼**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
4. **å¯è®¿é—®æ€§**: æ”¯æŒé”®ç›˜å¯¼èˆªå’Œå±å¹•é˜…è¯»å™¨

### ç•Œé¢å¸ƒå±€è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           éšæœºèœå•ç”Ÿæˆå™¨              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [éšæœºæ¨è] [é£Ÿææ¨è] [èœå“é€‰æ‹©]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚         æ¨èç»“æœæ˜¾ç¤ºåŒºåŸŸ              â”‚
â”‚    ğŸ½ï¸ å®«ä¿é¸¡ä¸                      â”‚
â”‚    ğŸ“‹ é¸¡èƒ¸è‚‰, èŠ±ç”Ÿç±³, å¹²è¾£æ¤’, èŠ±æ¤’    â”‚
â”‚    â­ â˜…â˜…â˜…â˜†â˜† (3/5)                   â”‚
â”‚    â±ï¸ 30åˆ†é’Ÿ                        â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ·»åŠ èœå“] [ç®¡ç†èœå•] [å¯¼å…¥/å¯¼å‡º]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº¤äº’è®¾è®¡

- **æ¨èæŒ‰é’®**: å¤§æŒ‰é’®è®¾è®¡ï¼Œä¸€é”®è·å–æ¨è
- **ç­›é€‰æ¡ä»¶**: å¯æŠ˜å çš„é«˜çº§é€‰é¡¹é¢æ¿
- **èœå“å¡ç‰‡**: å¡ç‰‡å¼è®¾è®¡å±•ç¤ºèœå“ä¿¡æ¯
- **æ“ä½œåé¦ˆ**: åŠ¨ç”»æ•ˆæœå’ŒçŠ¶æ€æç¤º

### ä¸»é¢˜å’Œæ ·å¼

- **é…è‰²æ–¹æ¡ˆ**: æ¸©æš–çš„æ©™è‰²ä¸»é¢˜ï¼Œç¬¦åˆç¾é£Ÿæ°›å›´
- **å­—ä½“é€‰æ‹©**: æ˜“è¯»çš„æ— è¡¬çº¿å­—ä½“
- **å›¾æ ‡ç³»ç»Ÿ**: ç»Ÿä¸€çš„å›¾æ ‡é£æ ¼
- **åŠ¨ç”»æ•ˆæœ**: å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»

## æ€§èƒ½è€ƒè™‘

### å®¢æˆ·ç«¯æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®ç¼“å­˜**: åœ¨å†…å­˜ä¸­ç¼“å­˜èœå•æ•°æ®ï¼Œé¿å…é¢‘ç¹è¯»å–localStorage
- **DOMæ“ä½œä¼˜åŒ–**: ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µæ‰¹é‡æ›´æ–°DOM
- **äº‹ä»¶å§”æ‰˜**: ä½¿ç”¨äº‹ä»¶å§”æ‰˜å‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡
- **é˜²æŠ–å¤„ç†**: å¯¹æœç´¢å’Œç­›é€‰æ“ä½œè¿›è¡Œé˜²æŠ–å¤„ç†

### å­˜å‚¨ä¼˜åŒ–

- **æ•°æ®å‹ç¼©**: å¯¹å¤§é‡æ•°æ®è¿›è¡ŒJSONå‹ç¼©å­˜å‚¨
- **å¢é‡æ›´æ–°**: åªæ›´æ–°å˜æ›´çš„æ•°æ®é¡¹
- **å­˜å‚¨é™åˆ¶**: ç›‘æ§localStorageä½¿ç”¨é‡ï¼Œæä¾›æ¸…ç†é€‰é¡¹

## æ‰©å±•æ€§è®¾è®¡

### åŠŸèƒ½æ‰©å±•

- **èœè°±è¯¦æƒ…**: æ”¯æŒæ·»åŠ è¯¦ç»†çš„åˆ¶ä½œæ­¥éª¤
- **è¥å…»ä¿¡æ¯**: æ·»åŠ å¡è·¯é‡Œå’Œè¥å…»æˆåˆ†ä¿¡æ¯
- **å›¾ç‰‡æ”¯æŒ**: æ”¯æŒä¸ºèœå“æ·»åŠ å›¾ç‰‡
- **è¯„åˆ†ç³»ç»Ÿ**: æ”¯æŒå¯¹èœå“è¿›è¡Œè¯„åˆ†å’Œæ”¶è—

### æ•°æ®æ‰©å±•

- **å¯¼å…¥å¯¼å‡º**: æ”¯æŒå¤šç§æ ¼å¼çš„æ•°æ®å¯¼å…¥å¯¼å‡º
- **äº‘åŒæ­¥**: æœªæ¥å¯æ‰©å±•æ”¯æŒäº‘ç«¯æ•°æ®åŒæ­¥
- **åˆ†äº«åŠŸèƒ½**: æ”¯æŒèœå•åˆ†äº«å’Œç¤¾åŒºåŠŸèƒ½

### æŠ€æœ¯æ‰©å±•

```javascript
// æœªæ¥å¯æ‰©å±•çš„æ¨¡å—åŒ–æ¶æ„
class MenuGeneratorCore {
    constructor() {
        this.plugins = new Map();
        this.hooks = new Map();
    }
    
    registerPlugin(name, plugin) {
        this.plugins.set(name, plugin);
    }
    
    executeHook(hookName, data) {
        // æ‰§è¡Œæ³¨å†Œçš„é’©å­å‡½æ•°
    }
}
```